<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <link rel="icon" type="image/x-icon" href="https://res.cloudinary.com/ccssiteimage/image/upload/v1613109629/site/favicon_gfqibc.ico">
        <link rel="stylesheet" href="https://sitestaticdata.s3.us-east-2.amazonaws.com/toolkit.styles.min.css">
        <title>Crown Commercial Service - CCS</title>
        <meta
        name="viewport" content="width=device-width, initial-scale=1.0"/>
        <!--<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous"> -->
        <link rel="preconnect" href="https://fonts.gstatic.com">
        <link rel="preconnect" href="https://fonts.gstatic.com">
        <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro&display=swap" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,500" rel="stylesheet">
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    </head>
    <style>
        html,
        body {
            height: 100%;
        }

        body {
            margin: 0;
            font-family: "GDS Transport", "arial", sans-serif;
            font-style: normal;
            font-weight: 300;
            background-color: #ffffff;
            color: #000000;
        }

        .invalid {
            border-left: red;
            border-left-style: solid;
            padding-left: 4px;
        }

        .login-container {
            margin: 40px 30px;
            display: block;
        }

        ul,
        ol {
            padding-left: 12px;
        }

        hr {
            width: 160px;
            height: 0;
            left: 30px;
            border: 2px solid #B1B4B6;
        }

        app-topnav a {
            text-decoration: none;
        }

        .right-content {
            text-align: end;
        }

        .footer-global:after {
            height: 20rem;
        }

        .govuk-footer__meta-item {
            margin-bottom: -15px;
        }


        /* Gov UK Styles */
        .footer-global {
            background-color: #2F2F2F;
            color: #fff;
            padding-top: 3.125rem;
        }

        .govuk-footer__link.govuk-footer__link {
            color: white;
            text-decoration: underline;
        }

        .footer-global .logo {
            margin-bottom: 2.5rem;
        }

        .govuk-footer__link:visited {
            color: #454a4c;
        }

        .footer-global .govuk-link:link,
        a:link {
            color: #005ea5;
        }

        .footer-global .logo {
            display: block;
        }

        .footer-global .govuk-link,
        a {
            font-family: "GDS Transport", "arial", sans-serif;
        }

        .footer-global .govuk-width-container {
            max-width: none;
            margin-right: 40px;
            margin-left: 40px;
        }

        .govuk-width-container {
            max-width: unset;
        }

        .govuk-input--error {
            border: 4px solid #b10e1e !important;
        }

        .govuk-input {
            font-family: "GDS Transport", "arial", sans-serif;
            font-weight: 400;
            font-size: 16px;
            font-size: 1rem;
            line-height: 1.25;
            box-sizing: border-box;
            width: 375px;
            height: 40px;
            margin-top: 0;
            padding: 5px;
            border: 2px solid #0b0c0c;
            border-radius: 0;
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
        }

        .govuk-select {
            font-family: "GDS Transport", "arial", sans-serif;
            font-weight: 400;
            font-size: 16px;
            font-size: 1rem;
            line-height: 1.25;
            -webkit-box-sizing: border-box;
            box-sizing: border-box;
            max-width: 100%;
            height: 40px;
            height: 2.5rem;
            padding: 5px;
            border: 2px solid #0b0c0c;
            min-width: 15.8em;
        }

        .govuk-button {
            background-color: #007E8A;
            border-radius: 0.1875rem;
            box-shadow: 0 3px 0 #003618;
            padding: 8px 10px 10px;
            width: auto;
            margin-bottom: 22px;
            height: 2em;
        }

        .govuk-button:focus {
            background-color: #ffdd00;
            color: #000000 !important;
            font-style: normal;
            outline: 3px solid transparent;
            border-color: #ffdd00;
            box-shadow: inset 0 0 0 1px #ffdd00;
        }


        .govuk-button--secondary:focus {
            background-color: #ffdd00 !important;
            font-style: normal;
            color: #0b0c0c !important;
        }

        .govuk-button:hover {
            background-color: #015e66;
            color: #FFFFFF !important;
        }

        .govuk-button--secondary:hover {
            background-color: #b1b4b6 !important;
            color: #0b0c0c !important;
        }

        .govuk-button--warning,
        .govuk-button--warning:link,
        .govuk-button--warning:visited,
        .govuk-button--warning:active,
        .govuk-button--warning:hover {
            color: #fff;
        }

        .govuk-button--warning {
            background-color: #d4351c !important;
            -webkit-box-shadow: 0 2px 0 #55150b !important;
            box-shadow: 0 2px 0 #55150b !important;
        }

        .govuk-button--secondary,
        .govuk-button--secondary:link,
        .govuk-button--secondary:visited,
        .govuk-button--secondary:active,
        .govuk-button--secondary:hover {
            color: #0b0c0c;
        }

        .govuk-button--secondary {
            background-color: #f3f2f1 !important;
            -webkit-box-shadow: 0 2px 0 #929191 !important;
            box-shadow: 0 2px 0 #929191 !important;
        }

        .govuk-\!-font-weight-bold {
            font-weight: 600 !important;
        }

        .govuk-error-summary__list a,
        .govuk-error-summary__list a:visited {
            color: #b10e1e;
        }

        .govuk-table caption {
            padding-top: 0.75em;
            padding-bottom: 0.3em;
            color: #0b0c0c;
            caption-side: top;
        }

        .govuk-breadcrumbs__link {
            color: #0b0c0c !important;
        }

        @media(min-width: 40.0625em) {
            .govuk-width-container {
                margin-right: 48px;
                margin-left: 48px;
            }

            .govuk-error-summary {
                margin-bottom: unset;
                border: 5px solid #d4351c
            }

            .govuk-select {
                font-size: 19px;
                font-size: 1.1875rem;
                line-height: 1.25;
            }

            .govuk-button {
                margin-bottom: 32px;
            }

            .govuk-\!-font-size-18 {
                font-size: 18px !important;
                font-size: 1.125rem !important;
                line-height: 1.27778 !important;
            }
        }

        @media(min-width: 1340px) {
            .ccs-width-container {
                margin-left: 45px;
                max-width: 1280px;
            }
        }

        .hidden {
            display: none
        }

        .container {
            border: 1px solid #ababab;
            width: 400px;
            margin: 30px auto auto;
            padding: 20px;
        }

        .error {
            color: #FFADB3;
        }

        .info {
            color: #33CC33
        }

        .loading {
            position: fixed;
            display: block;
            width: 100%;
            height: 100%;
            top: 0;
            right: 0;
            bottom: 0;
            left: 0;
            text-align: center;
            opacity: 0.7;
            background-color: #fff;
            z-index: 99;
        }

        .loader {
            left: 50%;
            margin-left: -4em;
            font-size: 10px;
            border: 0.8em solid rgba(218, 219, 223, 1);
            border-left: 0.8em solid rgba(58, 166, 165, 1);
            animation: spin 1.1s infinite linear;
        }

        .loader,
        .loader:after {
            border-radius: 50%;
            width: 8em;
            height: 8em;
            display: block;
            position: absolute;
            top: 50%;
            margin-top: -4.05em;
        }

        @keyframes spin {
            0% {
                transform: rotate(360deg);
            }

            100% {
                transform: rotate(0deg);
            }
        }

        .header-link {
            color: #FFFFFF !important;
        }

        .navigation-text:focus {
            color: #0b0c0c !important;
            background-color: #ffdd00 !important;
            text-decoration-color: #0b0c0c !important;
            text-decoration-line: underline;
            text-decoration-skip-ink: none;
            text-decoration-thickness: 3px;
            text-decoration-style: solid;
            outline: none !important;
        }

        .navigation-text:hover {
            color: #003078;
            text-decoration-color: rgb(0, 48, 120);
            text-decoration-line: underline;
            text-decoration-skip-ink: none;
            text-decoration-style: solid;
            text-decoration-thickness: 3px;
        }

        .govuk-cookie-banner {
            padding-top: 20px;
            border-bottom: 10px solid transparent;
            background-color: #f3f2f1;
        }

        .govuk-link:hover,
        .app-prose-scope a:hover {
            color: #003078;
            text-decoration-thickness: max(3px, 0.1875rem, 0.12em);
            text-decoration-skip-ink: none;
        }

        .view-cookie-link {
            font-size: 19px;
            line-height: 2;
            margin-left: 10px;
        }
    </style>

    <body class="govuk-template__body show-flourishes pillar--none js-enabled">
        <div id="cookieBannerDiv" style="display:none;" class="govuk-cookie-banner " data-nosnippet role="region" aria-label="Cookies on Public Procurement Gateway">
            <div id="cookieBannerSelectionDiv" class="govuk-cookie-banner__message govuk-width-container">

                <div class="govuk-grid-row">
                    <div class="govuk-grid-column-two-thirds">
                        <h2 class="govuk-cookie-banner__heading govuk-heading-m">Cookies on Public Procurement Gateway</h2>

                        <div class="govuk-cookie-banner__content">
                            <p class="govuk-body">We use some essential cookies to make this service work.</p>
                            <p class="govuk-body">We’d like to set additional cookies so we can remember your settings, understand how people use the service and make improvements.</p>
                        </div>
                    </div>
                </div>

                <div class="govuk-button-group">
                    <button id="acceptCookieButton" value="accept" name="cookies" class="govuk-button" data-module="govuk-button">
                        Accept additional cookies
                    </button>
                    <button id="rejectCookieButton" value="reject" name="cookies" class="govuk-button" data-module="govuk-button">
                        Reject additional cookies
                    </button>
                    <a class="govuk-link view-cookie-link" href="https://dev.identify.crowncommercial.gov.uk/cookies">View cookies</a>
                </div>
            </div>

            <div id="acceptCookieDiv" class="govuk-cookie-banner__message govuk-width-container">

                <div class="govuk-grid-row">
                    <div class="govuk-grid-column-two-thirds">

                        <div class="govuk-cookie-banner__content">
                            <p class="govuk-body">You’ve accepted additional cookies. You can
                                <a class="govuk-link" href="https://dev.identify.crowncommercial.gov.uk/cookies">change your cookie settings</a>
                                at any time.</p>
                        </div>
                    </div>
                </div>

                <div class="govuk-button-group">
                    <a id="hideCookieMsgOnAcceptButton" href="#" role="button" draggable="false" class="govuk-button" data-module="govuk-button">
                        Hide this message
                    </a>
                </div>
            </div>

            <div id="rejectCookieDiv" class="govuk-cookie-banner__message govuk-width-container">

                <div class="govuk-grid-row">
                    <div class="govuk-grid-column-two-thirds">

                        <div class="govuk-cookie-banner__content">
                            <p class="govuk-body">You’ve rejected additional cookies. You can
                                <a class="govuk-link" href="https://dev.identify.crowncommercial.gov.uk/cookies">change your cookie settings</a>
                                at any time.</p>
                        </div>
                    </div>
                </div>

                <div class="govuk-button-group">
                    <a id="hideCookieMsgOnRejectButton" href="#" role="button" draggable="false" class="govuk-button" data-module="govuk-button">
                        Hide this message
                    </a>
                </div>
            </div>
        </div>
        <header class="header-global">
            <div style="display:none" class="loading" id="loading">
                <div class="loader"></div>
            </div>
            <div class="ccs-width-container">
                <div class="nav-wrapper">
                    <a href="https://www.crowncommercial.gov.uk" class="logo"><img src="https://res.cloudinary.com/ccssiteimage/image/upload/v1613028512/site/CCS_WHITE_SML_AW_space-01_p3dj6u.png" alt="Go to the CCS homepage"></a>
                    <nav class="global-navigation" data-toggle="nav" data-app-uri="http://www.crowncommercial.gov.uk/contact/sendToSalesforce" data-app-pathinfo="/contact/sendToSalesforce" aria-hidden="false">
                        <ul
                            class="nav-list nav-list--primary"><!-- <li class="nav-list__item">
                                                                                            <a class="navigation-text" href="https://dev.identify.crowncommercial.gov.uk/help-support">Help and
                                                                                                support</a>
                                                                                        </li> -->
                        </ul>
                    </nav>
                </div>
            </div>
        </header>
        <div class="govuk-width-container">
            <div class="govuk-phase-banner">
                <p class="govuk-phase-banner__content">
                    <strong class="govuk-tag govuk-phase-banner__content__tag ">
                        beta
                    </strong>
                    <span class="govuk-phase-banner__text">This is a new service – your
                        <a class="navigation-text" target="_blank" href="https://crowncommercial.qualtrics.com/jfe/form/SV_3xDq7uNywwujVRA">feedback</a>
                        will help us to improve it.</span>
                </p>
            </div>
        </div>

        <div class="govuk-main-wrapper login-container">
            <h1 id="title" class="govuk-heading-xl"></h1>

            <div class="govuk-error-summary" aria-labelledby="error-summary-title" role="alert" tabindex="-1" id="error-summary" data-module="govuk-error-summary" style="display: none">
                <h2 class="govuk-error-summary__title" id="error-summary-title">
                    There is a problem
                </h2>
                <div class="govuk-error-summary__body">
                    <ul class="govuk-list govuk-error-summary__list">
                        <li style="display: none" id="li-error-general">
                            <a href="https://dev.identify.crowncommercial.gov.uk" id="a-error-general"></a>
                        </li>
                        <li style="display: none" id="li-error-enroll">
                            <a href="#" id="a-error-enroll" onclick="scrollToError('gcode-auth-form-group','gcodeenroll');return false;"></a>
                        </li>
                        <li style="display: none" id="li-error-auth">
                            <a href="#" id="a-error-auth" onclick="scrollToError('gcode-form-group','gcode');return false;"></a>
                        </li>
                    </ul>
                </div>
            </div>

            <div class="content flex">
                <div style="margin-bottom:10px;" class="content flex hidden hidden" data-recovery-report-container>
                    <span class="govuk-label" data-recovery-report></span>
                    <button type="button" class="govuk-!-font-size-18 govuk-!-font-weight-bold govuk-button" data-saved-recovery>Got it!</button>
                </div>
                <div class="content flex hidden" data-screen data-enrollment-enroll data-method="sms">
                    <div style="margin-top:10px;" data-enrollment-toolbar>
                        <button type="button" data-show-enrollment="push" class="govuk-button hidden">Push</button>
                        <button type="button" data-show-enrollment="sms" class="govuk-button hidden">SMS</button>
                        <button type="button" data-show-enrollment="otp" class="govuk-button hidden">Procurement
                                                                                Gateway Authenticator</button>
                    </div>
                    <form class="ui form login mb-two" data-enroll>
                        <div id="sms-form-group" class="govuk-form-group">
                            <label class="govuk-label" style="margin-top:8px;margin-bottom:0px" for="email">
                                Please enter your phone<br/>
                            </label>
                            <span style="display: none" id="error-enroll-sms" class="govuk-error-message">
                                <span class="govuk-visually-hidden">Error:</span>
                            </span>
                            <input type="tel" data-enroll-field="phoneNumber" class="govuk-input" id="phone" placeholder="Enter your phnoe">
                        </div>
                        <div class="captcha-container govuk-form-group"></div>
                        <button class="govuk-button" style="margin-top:25px;" type="submit" id="btn-login">
                            Enroll
                        </button>
                    </form>
                </div>

                <div class="content flex hidden" data-screen data-enrollment-confirm data-method="sms">
                    <div style="margin-top:10px;" data-enrollment-toolbar>
                        <button type="button" data-show-enrollment="push" class="govuk-button hidden">Push</button>
                        <button type="button" data-show-enrollment="sms" class="govuk-button hidden">SMS</button>
                        <button type="button" data-show-enrollment="otp" class="govuk-button hidden">Procurement
                                                                                Gateway Authenticator</button>
                    </div>

                    <form class="ui form login mb-two" data-confirm>
                        <div id="email-form-group" class="govuk-form-group">
                            <label class="govuk-label" style="margin-top:8px;margin-bottom:0px" for="email">
                                Please enter the verification code we sent by SMSes<br/>
                            </label>
                            <span style="display: none" id="error-sms-code" class="govuk-error-message">
                                <span class="govuk-visually-hidden">Error:</span>
                            </span>
                            <input type="text" data-confirm-field="otpCode" class="govuk-input" id="otpCode" placeholder="Enter your phnoe">
                        </div>
                        <div class="captcha-container govuk-form-group"></div>
                        <button class="govuk-button" style="margin-top:25px;" type="submit" id="btn-login">
                            Confirm enrollment
                        </button>
                    </form>
                </div>

                <div class="content flex hidden" data-screen data-enrollment-enroll data-method="push">
                    <div style="margin-top:10px;" data-enrollment-toolbar>
                        <button type="button" data-show-enrollment="push" class="govuk-button hidden">Push</button>
                        <button type="button" data-show-enrollment="sms" class="govuk-button hidden">SMS</button>
                        <button type="button" data-show-enrollment="otp" class="govuk-button hidden">Procurement
                                                                                Gateway Authenticator</button>
                    </div>

                    <p>Scan this QR With Guardian app</p>
                    <div data-qr></div>
                </div>


                <div
                    class="content flex hidden" data-screen data-enrollment-enroll data-method="otp" data-enrollment-confirm>
                    <!-- <div style="margin-top:10px;" data-enrollment-toolbar>
                                                                        <button type="button" data-show-enrollment="push"
                                                                            class="govuk-!-font-size-18 govuk-!-font-weight-bold govuk-button hidden">Push</button>
                                                                        <button type="button" data-show-enrollment="sms"
                                                                            class="govuk-!-font-size-18 govuk-!-font-weight-bold govuk-button hidden">SMS</button>
                                                                        <button type="button" data-show-enrollment="otp"
                                                                            class="govuk-!-font-size-18 govuk-!-font-weight-bold govuk-button hidden">Google
                                                                            Authenticator</button>
                                                                    </div> -->

                    <form class="ui form login mb-two" data-confirm>
                        <div style="margin-top: 25px;" class="govuk-grid-row">
                            <div class="govuk-grid-column-one-third" data-qr></div>
                            <div class="govuk-grid-column-two-thirds">
                                <p>
                                    You will need an authentication app on your device.
                                                                                                        An authentication app will
                                                                                                        generate a one-time password that you can use each time you sign in.
                                    <br>
                                    This app will not have access to your personal or government information.
                                </p>

                                <p>
                                    Go to your device’s app store, search for one of the following free to download authentication apps:</p>
                                <ul>
                                    <li>Auth0 Guardian</li>
                                    <li>Google Authenticator</li>
                                    <li>Microsoft Authenticator</li>
                                    <li>Twilio Authy</li>
                                </ul>
                                <p>
                                    Select an authentication app and install. Once installed, open the app.
                                </p>
                            </div>
                        </div>

                        <div id="gcode-form-group" class="govuk-form-group">
                            <label class="govuk-label" style="margin-top:8px;margin-bottom:0px">
                                Scan this QR code with your authenticator app<br/>
                            </label>
                            <span style="display: none;margin-top: 10px;" id="error-enroll-otp" class="govuk-error-message">
                                <span class="govuk-visually-hidden">Error:</span>
                            </span>
                            <input type="text" class="govuk-input" id="gcodeenroll" data-confirm-field="otpCode" placeholder="Enter your code">
                        </div>
                        <div class="captcha-container govuk-form-group"></div>
                        <button class="govuk-button" style="margin-top:25px;" type="submit" id="btn-gcode">
                            Register
                        </button>
                        <button onclick="cancelMfa()" class="govuk-button" style="margin-top:25px;" type="button" id="btn-cancel">
                            Cancel
                        </button>
                    </form>
                </div>

                <div class="hidden content flex hidden" data-screen data-login-confirm="otp">
                    <form data-login-verify class="ui form login mb-two" data-confirm>
                        <div data-qr></div>
                        <div id="gcode-auth-form-group" class="govuk-form-group">
                            <label class="govuk-label" style="margin-top:8px;margin-bottom:0px">
                                Enter the one-time password issued by your device<br/>
                            </label>
                            <span style="display: none;margin-top: 10px;" id="error-otp-code" class="govuk-error-message">
                                <span class="govuk-visually-hidden">Error:</span>
                            </span>
                            <input type="text" class="govuk-input" id="gcode" data-verify-field="otpCode" placeholder="Enter your code">
                        </div>
                        <label class="govuk-label" style="margin-top:8px;margin-bottom:0px">
                            Go to your authenticator app, open it and select the Public Procurement Gateway. Enter the one-time password displayed.</label>
                        <div class="captcha-container govuk-form-group"></div>
                        <button class="govuk-button" type="submit" id="btn-login">
                            Login
                        </button>
                        <button style="display: none;" data-show-recovery hidden class="govuk-button govuk-button--secondary" type="button" id="btn-recovery">
                            Recovery
                        </button>
                        <button onclick="resetMfa()" class="govuk-button govuk-button--secondary" type="button" id="btn-reset">
                            Reset
                        </button>
                        <button onclick="cancelMfa()" class="govuk-button govuk-button--secondary" type="button" id="btn-cancel">
                            Cancel
                        </button>
                    </form>
                </div>


                <div class="hidden content flex hidden" data-screen data-login-confirm="push">
                    <p class="govuk-body" data-request-loading>Sending push notification...</p>
                    <p class="govuk-body" data-request-done>We have sent a push notification to your phone</p>
                    <button class="govuk-button" style="margin-top:25px;" type="button" data-login-verify-show="otp">I
                                                                    don't have the
                                                                    device
                                                                    handy</button>
                    <button class="govuk-button" style="margin-top:25px;" type="button" data-request>Retry</button>
                    <p>
                        <button class="govuk-button govuk-button--secondary" style="margin-top:25px;" type="button" data-show-recovery>Recovery</button>
                    </p>
                </div>


                <div class="hidden content flex hidden" data-screen data-login-confirm="sms">
                    <p class="govuk-body" data-request-loading>Sending sms...</p>
                    <p class="govuk-body" data-request-done>
                        Enter a the code we sent by SMS.
                        <button class="govuk-button" type="button" data-request>Retry</button>
                    </p>
                    <form class="ui form login mb-two" data-login-verify>
                        <input type="text" class="govuk-input" data-verify-field="otpCode"/>
                        <button class="govuk-button" style="margin-top:25px;" type="submit">Login</button>
                    </form>
                    <!-- <p>
                                                                        <button class="govuk-!-font-size-18 govuk-!-font-weight-bold govuk-button"
                                                                            style="margin-top:25px;" type="button" data-show-recovery>Recovery</button>
                                                                    </p>
                                                                    <button class="govuk-!-font-size-18 govuk-!-font-weight-bold govuk-button"
                                                                        style="margin-top:25px;" type="button" data-login-verify-show="otp">I don't have the device
                                                                        handy</button> -->
                    <button class="govuk-button govuk-button--secondary" style="margin-top:25px;" type="button" data-request>Retry</button>
                </div>


                <div class="hidden" data-screen data-recovery data-login-confirm="recovery-code">
                    <form class="ui form login mb-two" data-recovery-verify>
                        <p>Enter recovery code to login</p>
                        <input type="text" class="govuk-input" data-recovery-field="recoveryCode"/>
                        <button class="govuk-button" type="submit">Login</button>
                    </form>
                </div>

                <div class="hidden" data-screen data-messages>
                    <p class="govuk-body" data-type></p>
                    <p class="govuk-body" data-message></p>
                </div>
                <!-- <a class="navigation-text" href="https://dev.identify.crowncommercial.gov.uk/help-support">Get help with this page</a> -->
            </div>

        </div>
        <footer class="govuk-footer footer-global footer" role="contentinfo">
            <div class="govuk-width-container ">
                <div class="govuk-footer__meta">
                    <div class="govuk-footer__meta-item">
                        <a class="govuk-footer__link logo" href="/"><img src="https://res.cloudinary.com/ccssiteimage/image/upload/v1613028512/site/CCS_WHITE_SML_AW_space-01_p3dj6u.png" alt="Go to the CCS homepage"></a>
                    </div>
                    <div class="govuk-footer__meta-item govuk-footer__meta-item--grow right-content">
                        <ul class="govuk-list">
                            <li>
                                <ul class="govuk-footer__inline-list">
                                    <li class="govuk-footer__inline-list-item">
                                        <a href="https://twitter.com/gov_procurement" class="govuk-footer__link">
                                            <span class="icon">
                                                <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24">
                                                    <path fill="currentColor" d="M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"></path>
                                                </svg>
                                            </span>
                                            <span class="visuallyhidden">Follow us on Twitter</span>
                                        </a>
                                    </li>
                                    <li class="govuk-footer__inline-list-item">
                                        <a href="https://www.linkedin.com/company/government-procurement-service/" class="govuk-footer__link">
                                            <span class="icon">
                                                <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24">
                                                    <path fill="currentColor" d="M4.98 3.5c0 1.381-1.11 2.5-2.48 2.5s-2.48-1.119-2.48-2.5c0-1.38 1.11-2.5 2.48-2.5s2.48 1.12 2.48 2.5zm.02 4.5h-5v16h5v-16zm7.982 0h-4.968v16h4.969v-8.399c0-4.67 6.029-5.052 6.029 0v8.399h4.988v-10.131c0-7.88-8.922-7.593-11.018-3.714v-2.155z"></path>
                                                </svg>
                                            </span>
                                            <span class="visuallyhidden">Connect with us on LinkedIn</span>
                                        </a>
                                    </li>
                                </ul>
                            </li>
                            <li>
                                <ul class="govuk-footer__inline-list">
                                    <li class="govuk-footer__inline-list-item">
                                        <a class="govuk-footer__link" href="https://www.crowncommercial.gov.uk/contact">Contact CCS</a>
                                    </li>
                                    <li class="govuk-footer__inline-list-item">
                                        <a class="govuk-footer__link" href="https://dev.identify.crowncommercial.gov.uk/cookies">Cookies</a>
                                    </li>
                                    <li class="govuk-footer__inline-list-item">
                                        <a class="govuk-footer__link" href="https://www.gov.uk/government/publications/crown-commercial-service-privacy-notice">Privacy
                                                                                                                                Policy</a>
                                    </li>
                                    <li class="govuk-footer__inline-list-item">
                                        <a class="govuk-footer__link" href="https://www.nationalarchives.gov.uk/information-management/re-using-public-sector-information/uk-government-licensing-framework/crown-copyright/">©
                                                                                                                                Crown copyright</a>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </footer>

        <!--[if IE 8]>
                    <script src="//cdnjs.cloudflare.com/ajax/libs/ie8/0.2.5/ie8.js"></script>
                    <![endif]-->

        <!--[if lte IE 9]>
                    <script src="https://cdn.auth0.com/js/polyfills/1.0/base64.min.js"></script>
                    <script src="https://cdn.auth0.com/js/polyfills/1.0/es5-shim.min.js"></script>
                    <![endif]-->

        <script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha256-cCueBR6CsyA4/9szpPfrX3s49M9vUU5BgtiJj06wt/s=" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.qrcode/1.0/jquery.qrcode.min.js"></script>
        <script src="https://cdn.auth0.com/js/guardian-js/1.3.0/guardian-js.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js" integrity="sha512-E8QSvWZ0eCLGk4km3hxSsNmGWbLtSCSUcewDQPQWZF6pEU8GlT8a5fF32wOl1i8ftdMhssTrF/OhyGWwonTcXA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

        <script>
            function getCookie(cname) {
                let name = cname + "=";
                let decodedCookie = decodeURIComponent(document.cookie);
                let ca = decodedCookie.split(';');
                for (let i = 0; i < ca.length; i++) {
                    let c = ca[i];
                    while (c.charAt(0) == ' ') {
                        c = c.substring(1);
                    }
                    if (c.indexOf(name) == 0) {
                        return c.substring(name.length, c.length);
                    }
                }
                return "";
            }

            function setCookie(cname, cvalue, exmin) {
                const d = new Date();
                d.setTime(d.getTime() + (exmin * 60000));
                let expires = "expires=" + d.toUTCString();
                document.cookie = cname + "=" + cvalue + ";" + expires + ";domain=.crowncommercial.gov.uk;path=/;SameSite=Lax";
            }

            function deleteCookie(cname, cvalue) {
                let expires = "expires=Thu, 01 Jan 1970 00:00:00 UTC";
                document.cookie = cname + "=" + cvalue + ";" + expires + ";domain=.crowncommercial.gov.uk;path=/;SameSite=Lax";
            }

            function deleteAdditionalCookies() { // delete additional cookies
                deleteCookie("test_additional", 'test');
                deleteCookie("_gid", 'removed');
                deleteCookie("_ga", 'removed');
                deleteCookie("_gat_UA-47046847-22", 'removed');
            }

            window.addEventListener('load', function () { // debugger;
                var cookieExpirationTimeInMinutes = 525600;
                // 525600 => 365 Days
                // setCookie("test_additional", 'test', cookieExpirationTimeInMinutes);
                var cookieBannerDiv = document.getElementById('cookieBannerDiv');
                var acceptCookieDiv = document.getElementById('acceptCookieDiv');
                var rejectCookieDiv = document.getElementById('rejectCookieDiv');
                var cookieBannerSelectionDiv = document.getElementById('cookieBannerSelectionDiv');
                acceptCookieDiv.style.display = 'none';
                rejectCookieDiv.style.display = 'none';
                let cookiePreferenceSetCookie = getCookie("ppg_cookies_preferences_set");
                let cookiePolicyCookie = getCookie("ppg_cookies_policy");
                if (cookiePreferenceSetCookie != "" && cookiePolicyCookie != "") {
                    if (!JSON.parse(cookiePolicyCookie).additional) {
                        console.log("NOT_ENABLE_ADDITONAL_COOKIES");
                        deleteAdditionalCookies();
                    }
                } else {
                    cookieBannerDiv.style.display = 'block';
                    setCookie("ppg_cookies_policy", '{"essential":true,"additional":false}', cookieExpirationTimeInMinutes);
                    // deleteAdditionalCookies();
                }

                function acceptAdditionalCookies(e) {
                    e.preventDefault();
                    cookieBannerSelectionDiv.style.display = 'none';
                    acceptCookieDiv.style.display = 'block';
                    setCookie("ppg_cookies_preferences_set", true, cookieExpirationTimeInMinutes);
                    setCookie("ppg_cookies_policy", '{"essential":true,"additional":true}', cookieExpirationTimeInMinutes);
                }

                function rejectAdditionalCookies(e) {
                    e.preventDefault();
                    cookieBannerSelectionDiv.style.display = 'none';
                    rejectCookieDiv.style.display = 'block';
                    setCookie("ppg_cookies_preferences_set", true, cookieExpirationTimeInMinutes);
                    setCookie("ppg_cookies_policy", '{"essential":true,"additional":false}', cookieExpirationTimeInMinutes);
                    deleteAdditionalCookies();
                }

                function hideCookieMsg(e) {
                    e.preventDefault();
                    cookieBannerDiv.style.display = 'none';
                }

                document.getElementById('acceptCookieButton').addEventListener('click', acceptAdditionalCookies);
                document.getElementById('rejectCookieButton').addEventListener('click', rejectAdditionalCookies);
                document.getElementById('hideCookieMsgOnAcceptButton').addEventListener('click', hideCookieMsg);
                document.getElementById('hideCookieMsgOnRejectButton').addEventListener('click', hideCookieMsg);
            });
        </script>

        <script>
            var mfaMethod = 'otp';
            var isAuthMode = true;
            var clientId = "5G2pNShwaBQzjJNx6fCSqt9ZIAU9sEur";
            var baseUrl = "https://auth.dev.identify.crowncommercial.gov.uk";
            var logoutCallbackUrl = 'https://dev.identify.crowncommercial.gov.uk';
            var encrypted = CryptoJS.AES.encrypt('{{ userData.friendlyUserId }}', 'conclavesimpleemailencrypt');
            var mfareseturl = 'https://dev.identify.crowncommercial.gov.uk/mfaresetnotification?u=' + encodeURIComponent(encrypted);
            function resetMfa() {
                window.location = mfareseturl;
            }

            function cancelMfa() {
                window.location = baseUrl + "/v2/logout?client_id=" + clientId + "&returnTo=" + logoutCallbackUrl;
            }

            function scrollToError(element, inputId) {
                debugger;
                let elementObj = document.getElementById(element);
                let inputObj = document.getElementById(inputId);
                elementObj.scrollIntoView();
                inputObj.focus();
            }(function () {
                var $root = $('body');
                var screen = (function () {
                    var $active;

                    function transitionTo(to) {
                        $to = $(to);

                        $('[data-error]').addClass('hidden');
                        $('[data-screen]').addClass('hidden');
                        $to.removeClass('hidden');
                        $active = $to;

                        return $active;
                    }

                    function getActive() {
                        return $active
                    }

                    return {getActive: getActive, transitionTo: transitionTo};
                })();

                var state = {
                    pendingReports: {},
                    current: {
                        authPayload: null
                    }
                };

                screen.transitionTo('[data-loading]');

                function postCallServer(authPayload) {
                    {% if postActionURL %}
                        auth0GuardianJS.formPostHelper("{{ postActionURL }}", authPayload);{% endif %}
                }

                // --------------------- Setup Guardian JS ----------------------------

                var guardianjs = auth0GuardianJS({
                    serviceUrl: "{{ mfaServerUrl }}",
                    {% if ticket %}
                        ticket : "{{ ticket }}",
                    {% else %}
                        requestToken : "{{ requestToken }}",
                    {% endif %}

                    issuer: {
                        label: "{{ userData.friendlyUserId }}",
                        name: "{{ userData.tenantFriendlyName }}"
                    },

                    globalTrackingId: "{{ globalTrackingId }}",{% if stateCheckingMechanism %}stateCheckingMechanism : "{{ stateCheckingMechanism }}",{% endif %}
                });

                $root.off('click.saved-recovery').on('click.saved-recovery', '[data-saved-recovery]', function () {
                    if (state.current.authPayload) {
                        postCallServer(state.current.authPayload);
                    }
                });

                $root.off('click.request').on('click.request', '[data-request]', function () {
                    requestAuth(state.current.transaction, state.current.enrollment, state.current.method);
                });

                $root.off('submit.login-verify').on('submit.login-verify', '[data-login-verify]', function (e) {
                    debugger;

                    $('#loading').show();
                    e.preventDefault();

                    var data = getData(screen.getActive(), '[data-verify-field]', 'verify-field');
                    state.current.auth.verify(data);
                });

                $root.off('click.show-recovery').on('click.show-recovery', '[data-show-recovery]', function () {
                    debugger;
                    screen.transitionTo('[data-recovery]');
                });

                $root.off('click.login-verify-show').on('click.login-verify-show', '[data-login-verify-show]', function () {
                    startAuth(state.current.transaction, 'otp');
                });

                $root.off('submit.recovery-verify').on('submit.recovery-verify', '[data-recovery-verify]', function (evt) {
                    evt.preventDefault();

                    recoverAccount(state.current.transaction);
                });

                // ------------------- START Guardian transaction ---------------------
                guardianjs.start(function (err, transaction) {

                    if (transaction.isEnrolled()) {
                        $("#title").text("Sign in using additional security on your digital device");
                    } else {
                        $("#title").text("Set up additional security using your digital device");
                    }

                    if (err) {
                        state.transaction = null;
                        showError(err);
                        return;
                    }

                    state.current.transaction = transaction;

                    // Let's start listening for timeout in case the user takes too long
                    // to login and the transaction expires
                    // transaction.on('timeout', function (p) {
                    //     debugger;
                    //     state.transaction = null;
                    //     showError('Seems that you\'ve taken too long to login');
                    // });

                    // Let's start listening for errors
                    transaction.on('error', function (err) {
                        debugger;
                        $('#loading').hide();
                        showError(err);
                    });

                    transaction.on('enrollment-complete', function (p) {
                        // If enrollment is complete but not the transaction
                        // we need to render the login screen to continue the
                        // transaction
                        if (p.authRequired) {
                            startAuth(transaction);
                        }

                        if (p.recoveryCode) {
                            $('[data-recovery-report-container]').removeClass('hidden');
                            $('[data-recovery-report]').text('Recovery code: ' + p.recoveryCode);
                            state.pendingReports.recovery = true;
                        }
                    });

                    transaction.on('auth-response', function (p) {
                        state.current.authPayload = p;

                        if (! p.accepted) { // Login has been rejected, the transaction can continue anyway
                            showLocalError('Login rejected');
                            return;
                        }

                        if (p.recoveryCode) { // New recovery code
                            $('[data-recovery-report-container]').removeClass('hidden');
                            $('[data-recovery-report]').text('New recovery code: ' + p.recoveryCode);
                            state.pendingReports.recovery = true;
                        }

                        if (Object.keys(state.pendingReports).length === 0) { // Login is complete and there is nothing else to post let's callback the server
                            postCallServer(state.current.authPayload);
                        }

                        // showSuccess('Login complete');
                    });

                    if (transaction.isEnrolled()) {
                        isAuthMode = true;
                        startAuth(transaction)
                        // If user is enrolled let's go to login screen
                        // renderLogin(transaction);
                    } else {
                        isAuthMode = false;
                        // If user is not enrolled let's go to enrollment screen
                        startEnrollment(transaction);
                    }

                    return null;
                });

                function startAuth(transaction, method) {
                    var enrollment = state.current.enrollment = transaction.getEnrollments()[0];
                    var availableMethods = state.current.availableMethods = enrollment.getAvailableAuthenticatorTypes();
                    if (availableMethods.length === 0) {
                        showCustomError('No available method', 'No available method', 'general')
                        return;
                    }
                    method = state.current.method = method || availableMethods[0];
                    screen.transitionTo('[data-login-confirm="' + method + '"]');
                    requestAuth(transaction, enrollment, method);
                }

                function requestAuth(transaction, enrollment, method) {
                    var $active = screen.getActive();
                    $active.find('[data-request-loading]').removeClass('hidden');
                    $active.find('[data-request-done]').addClass('hidden');
                    transaction.requestAuth(enrollment, {
                        method: method
                    }, function (err, auth) {
                        if (err) {
                            return showError(err);
                        }

                        var $active = screen.getActive();
                        $active.find('[data-request-loading]').addClass('hidden');
                        $active.find('[data-request-done]').removeClass('hidden');

                        state.current.auth = auth;
                    });
                }

                function startEnrollment(transaction) {
                    var availableMethods = transaction.getAvailableEnrollmentMethods();

                    var i;
                    for (i = 0; i < availableMethods.length; i++) {
                        $root.find('[data-show-enrollment="' + availableMethods[i] + '"]').removeClass('hidden');
                    }

                    screen.transitionTo('[data-enrollment-enroll][data-method="' + availableMethods[0] + '"]');

                    renderEnrollmentToMethod(transaction, availableMethods[0]);

                    $root.off('click.show-enrollment').on('click.show-enrollment', '[data-show-enrollment]', function (evt) {
                        var method = $(evt.target).data('show-enrollment');
                        mfaMethod = method;
                        renderEnrollmentToMethod(transaction, method);
                    });

                }

                function renderEnrollmentToMethod(transaction, method) {
                    screen.transitionTo('[data-enrollment-enroll]' + '[data-method="' + method + '"]');
                    mfaMethod = method;
                    // Show the QR if there is an enrollment URI, if the factor
                    // doesn't support an URI you will get null on getUri() method
                    var $qr = screen.getActive().find('[data-qr]');
                    if ($qr.length) {
                        transaction.enroll(method, null, function (err, enroll) {
                            debugger;
                            if (err) {
                                return showLocalError(err);
                            }

                            state.current.enroll = enroll;

                            $qr.empty().qrcode(enroll.getUri());
                        });
                    }

                    $root.off('submit.enroll').on('submit.enroll', '[data-enroll]', function (evt) {
                        debugger;
                        $('#loading').show();
                        evt.preventDefault();
                        var data = getData(screen.getActive(), '[data-enroll-field]', 'enroll-field');
                        // Sends enrollment data to the server. This is the first step of
                        // enrollment. You need to send phoneNumber for sms, the other
                        // factors doesn't need sending data, but the method is a
                        // NOOP that returns a promise just as a convenience
                        transaction.enroll(method, data, function (err, enroll) {
                            mfaMethod = method;
                            if (err) {
                                return showLocalError(err);
                            }

                            state.current.enroll = enroll;

                            screen.transitionTo('[data-enrollment-confirm]' + '[data-method="' + method + '"]');
                        });
                    });

                    $root.off('submit.confirm').on('submit.confirm', '[data-confirm]', function (evt) {
                        evt.preventDefault();
                        $('#loading').show();
                        var data = getData(screen.getActive(), '[data-confirm-field]', 'confirm-field');
                        var enroll = state.current.enroll;

                        // Once enroll information is sent you have to confirm the
                        // enrollment by sending the first otp code
                        enroll.confirm(data);
                    });
                }

                function recoverAccount(transaction) {
                    delete state.pendingReports.recovery;
                    var data = getData(screen.getActive(), '[data-recovery-field]', 'recovery-field');
                    transaction.recover(data);
                }

                // ----------------------------- Utilities ------------------------------

                function showCustomError(errorTop, errorInline, code) {
                    $('#error-summary').show();
                    // if (code == 'invalid_otp' || code == 'invalid_otp_format') {
                    if (code == 'general') {
                        $('#li-error-general').show();
                        $('#a-error-general').text(errorTop);
                        $('#li-error-enroll').hide();
                        $('#li-error-auth').hide();
                    } else if (isAuthMode) {
                        $('#li-error-auth').show();
                        $('#error-otp-code').show();
                        $('#error-otp-code').text(errorInline);
                        $('#a-error-auth').text(errorTop);
                        $('#li-error-enroll').hide();
                        $('#li-error-general').hide();
                        $('#error-enroll-otp').hide();
                    } else {
                        $('#li-error-enroll').show();
                        $('#error-enroll-otp').show();
                        $('#error-enroll-otp').text(errorInline);
                        $('#a-error-enroll').text(errorTop);
                        $('#li-error-auth').hide();
                        $('#li-error-general').hide();
                        $("#error-otp-code").hide();
                    }

                }

                function showMessage(message, type) {
                    $messages = $('[data-messages]');

                    screen.transitionTo($messages);

                    $messages.attr('class', type);
                    $messages.find('[data-type]').text(type === 'error' ? 'Error:' : 'Success:');
                    $messages.find('[data-message]').text(message);

                    return null;
                }

                var errors = {
                    local: [
                        'error_sending_push_notification',
                        'push_notification_wrong_credentials',
                        'invalid_otp',
                        'invalid_recovery_code',
                        'invalid_body',
                        'invalid_query_string',
                        'invalid_phone_number',
                        'error_sending_sms',
                        'pn_endpoint_disabled',
                        'too_many_sms',
                        'too_many_pn',
                        'too_many_sms_per_tenant',
                        'too_many_pn_per_tenant',
                        'invalid_otp_format',
                        'invalid_recovery_code_format'
                    ],
                    global: [
                        'invalid_token',
                        'insufficient_scope',
                        'invalid_bearer_format',
                        'enrollment_conflict',
                        'tenant_not_found',
                        'login_transaction_not_found',
                        'enrollment_transaction_not_found',
                        'feature_disabled',
                        'feature_disabled_by_admin',
                        'method_not_found',
                        'no_method_available',
                        'enrollment_method_disabled',
                        'auth_method_disabled',
                        'transaction_expired',
                        'already_enrolled',
                        'not_enrolled'
                    ]
                };

                function showError(message) {
                    if (message instanceof Error) {
                        if (errors.local.indexOf(message.errorCode) >= 0 || message.errorCode == 'field_required') {
                            showLocalError(message);
                            return;
                        } else if (message.response.unauthorized) {
                            $('#btn-gcode-enroll').prop('disabled', true);
                            $('#btn-login').prop('disabled', true);
                            let errorMsg = 'Your Session has expired. Please go back to provide your credentials';
                            showCustomError(errorMsg, errorMsg, 'general');
                            return;
                        }

                        message = message.message || 'Something went wrong...';
                    }

                    // showMessage(message, 'error');
                    showCustomError(message, message, 'general');
                }

                function showLocalError(message) {
                    let code = 'general'
                    $('#loading').hide();
                    let detailError = message;
                    if (message instanceof Error) {
                        code = message.errorCode;
                        if (code == 'invalid_otp' || 'invalid_otp_format') {
                            message = 'Enter a valid one-time password';
                            detailError = 'Enter a valid one-time password. Your authenticator app will generate a new one-time password every 30 seconds.';
                        } else if (code == 'field_required') {
                            message = 'One-time password is required';
                            detailError = 'One-time password is required.';
                        } else {
                            message = message.message || 'Something went wrong...';
                            detailError = message;
                        }
                    }

                    // $root.find('[data-error]').text(message).removeClass('hidden');
                    showCustomError(message, detailError, code);
                }

                function showSuccess(message) {
                    showMessage(message, 'success');
                }

                // Get data from
                function getData($root, selector, dataField) {
                    var data = {};

                    $root.find(selector).each(function (index, item) {
                        var $item = $(item);
                        return data[$item.data(dataField)] = $item.val();
                    });

                    return data;
                }

            })();
        </script>
    </body>

</html>
